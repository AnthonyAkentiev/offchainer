\section{Background}

\subsection{Blockchain}

A new concept for trustless, decentralized and transparent information processing and storage has been developed, introduced and already integrated into several mainstream applications in the last years. Bitcoin, developed by an unknown person or group under the name of Satoshi Nakamoto, led this initiative back in 2008 with its open-source, peer-to-peer network which cryptographically stores records in a chain and serves as a distributed ledger, this was named the Blockchain. The currency in which these operations were valued and paid for with was called Bitcoin, and it was the first decentralized digital currency. 
Blockchains are essentially continuously growing lists of information which are linked together and secured using cryptography. The main benefit of Blockchains is that they are designed to be incorruptible, and that the data they hold cannot be modified without mutual consent since the entire history of the chain is always stored and recorded on it. It is verified by peers and transparent to each user. 
Blockchains consist of specific properties including immutability and transparency of cryptographically-secured and peer-recorded transactions, which have been settled upon by the consensus of the network. By enabling the build up of trustless interactions, business disintermediation continues to be one of the most important objectives of using blockchains.

\subsection{Ethereum and Smart Contracts}

Smart contracts are a feature which the Ethereum Blockchain is based on. A smart contract is basically a computer program which can check for the fulfillment of certain preconfigured conditions and control the transfer of funds or other assets between several parties. While a standard contract enforces its terms through its legality, a Smart Contract actualizes this enforcement automatically through network consensus and a cryptographically secured system. The contracts are stored on the Blockchain and thereby serve as a decentralized middle man which stores records, enforces conditions and is completely neutral and transparent. The most popular platform which utilizes this technology is the Ethereum Blockchain. It empowers developers to create their own Smart Contracts and their own decentralized Blockchain applications [\cite{Buterin2014}].  \\

The runtime environment which the Smart Contracts actually run on is called the Ethereum Virtual Machine (EVM), and it continuously runs on every node on the chain, which means that every task which is executed inside of the EVM is run by each node, which is obviously costly, but one of the benefits of this is that each contract can call any other contract at zero cost [\cite{Buterin2014}]. The EVM is also isolated in the sense that no outside framework or file system is accessible, this to ensure determinism. The Smart Contracts themselves are written using the Solidity programming language which was designed for this purpose, and it allows users to create contracts which can be used for voting, crowdfunding, blind auctions, multi-signature wallets and more.\\

In order to ensure that the Ethereum network would not be abused or deliberately attacked, the Ethereum protocol charges a fee for every computational step. The way this cost is paid is through an attribute called ‘gas’. The fee or the price of the gas is determined simply via supply and demand; the users’ willingness to pay vs the price for which the miners' are willing to mine the next block in the Blockchain. Basically the way these fees work is that every transaction contains a 'gasPrice' attribute, which is the price per computational step, and the 'startGas' attribute, being the maximum amount of gas which the sender is willing to pay for the transaction. Therefore, at every execution of a transaction a prior evaluation of the transaction cost is done [\cite{Buterin2014}].\\

				\[ gasCost(Tx)= {gasPrice * startGas}\]
\\
The usage of the EVM for the most part makes sense when it comes to running business logic applications ("if this, then that") such as confirming signatures or other cryptographic objects [\cite{Ethereum2017}. On the other hand, any utilization which incorporates using the EVM as a file storage platform or anything GUI related would not be practical due to the tremendous costs. 


\begin{figure}[h]
\centering
\includegraphics[width=0.4\textwidth]{images/smartcontracts.png}
\caption{\label{fig:Smartcontracts}www.blockgeeks.com}
\end{figure}




\subsection{Blockchain-level Protocol: UTXO and Account Model}

The need of secure of value transfer lead to invention of building tamper-resistant systems. The way how transactions are handled, is one of the main characteristics of the blockchain technology. They are the smallest building pieces of a blockchain system. Transaction level consensus are exceptionally expensive, therefore, are bundled together forming a block or a unite of consensus. With every block creation chained to the previous block (through previous block hash) in the network forming chains of blocks, therefore, creating the blockchain.


\begin{figure}[h]
\centering
\includegraphics[width=0.8\textwidth]{images/transactions_blocks.png}
\caption{\label{fig:Transactions}Transactions order bundeled into blocks.}
\end{figure}


With blockchain being a mutual, decentralized, distributed state machine, this implies that all nodes (users of the blockchain framework) freely hold their own particular duplicate of the blockchain, and the current known "state" is calculated by handling every transaction in order as they show up in the blockchain. The way how each transactions and blocks are mined (processed) in the network differ from implementation. With the introduction of Bitcoin’s Unspent Transaction Output (UTXO) and later Ethereum project with its concept of Account Model state model. Further in this report we provide an explanation of each state models, purpose and use cases.

\subparagraph{Unspent Transaction Output (UTXO)}

With Bitcoin being a transaction-centric state model UTXO model; which specifies who is allowed to use the output of the transaction moves the estimation of some bitcoin from one address to other address. A transaction changes the state of the agreed-correct blockchain. 

\begin{figure}[h]
\centering
\includegraphics[width=0.8\textwidth]{images/UTXO.png}
\caption{\label{fig:UTXO}UTXO Transactions example}
\end{figure}

Understanding the above example of how Bitcoin transactions work which are UTXO model, transactions contain one or more input and output vice versa. An input is a reference to an output from the previous transaction. Whereas an output specifies the amount and an address. With the input pointing always referencing from a previous transaction, provides and uninterrupted stream of value amongst addresses

\subparagraph{UTXO Transaction Validation}
\begin{itemize}
\item Guarantees inputs have not yet been spent 
\item Checking if the signatures match with addresses of transactions inputs 
\item Total of output values is equivalent to total of input values 
\end{itemize}


\subparagraph{Benefits of UTXO Model:}
\begin{itemize}
\item \textbf{Higher level of privacy:} if a user uses another address for every transaction that they receive then it will quite hard to find the correlation of accounts to each other. This model suits greatly for currency use, however significantly less to subjective decentralized applications (DApp), since DApps frequently include monitoring complex packaged state of users which becomes difficult to be achieved.  
\item \textbf{Potential scalability paradigms:} UTXOs are more hypothetically compatible with certain types of scalability paradigms.
\end{itemize}

\subparagraph{Account Model}

Ethereum transactions, rather, utilize an architecture depending on global state storage of accounts, balances, code, and storage. The balances of accounts are kept as global state. Moreover, the having the value distribution of a state-centric meaning of transaction specifies sender and the receiver account and its not referenced to the previous transactions. Transaction include binary data (its payload) and Ether

\begin{figure}[h]
\centering
\includegraphics[width=1.0\textwidth]{images/account_model.png}
\caption{\label{fig:account model}Ethereum Blockchain Account Model Transactions}
\end{figure}


\subparagraph{Account Model Transaction Validation}
\begin{itemize}
\item Check whether signatures match with address of the sender 
\item Ensuring that the current nonce matches the nonce from the sender’s account. If that’s the case, it automatically increments the nonce of the sender  
\item Guarantee the sender's balance is bigger or equal with than the transaction value
\end{itemize}

\subparagraph{Benefits of Account Model:}
\begin{itemize}
\item \textbf{Huge space savings:}Due to the fact that each transaction only needs to create one reference, one signature and one output
\item \textbf{Simplicity:} Light clients are able to access the whole records related to an account through scanning down the state tree in a specific direction.
\end{itemize}


\input{sections/subsections/0203_integrity_checks}